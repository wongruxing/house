import{A as b,s as P,u as y,N as T,C as g,T as D,S as N,g as V}from"./date-range-fd9b2d93.js";import{L as x}from"./line-67ef0491.js";import{C as E}from"./content-card-8caa59ff.js";import{d as A,c as m,b as n,g as K,f as _,_ as L,r as s,w as Q,h as O,o as X,a as e,u as r,t as u,F as Y,j as H,i as J,n as U}from"./index-0ef19f66.js";const W="/frontend/assets/dun-516fd52d.png",Z="/frontend/assets/set-428c6481.png",ee={class:"qf-table"},te=A({__name:"qf-table",props:{color:{},data:{},columns:{}},setup(M){return(o,d)=>{const c=K("a-table");return _(),m("div",ee,[n(c,{columns:o.columns,"data-source":o.data,pagination:!1,"row-class-name":(i,v)=>v%2!==1?o.color==="red"?"table-red":"table-blue":null},null,8,["columns","data-source","row-class-name"])])}}});const ae=L(te,[["__scopeId","data-v-c703c2c1"]]),ne={class:"statis-box"},se={class:"statis-item"},le={class:"margin-top-30 flex-between"},oe={class:"flex-between"},ie={class:"num-box"},ce={class:"flex-between num-item"},re={class:"num-value"},ue={class:"flex-between num-item"},de={class:"num-value"},ve={class:"flex-between num-item"},me={class:"num-value"},_e={class:"area-box"},pe={class:"margin-top-30"},he={class:"status-box"},fe={class:"chart-msg-2"},be={class:"status-num"},ye={class:"chart-line-box"},ge={class:"statis-item"},xe={class:"tabs-box"},we=["onClick"],Ce={class:"content-box"},Ie=A({__name:"inspection",setup(M){const o=J("filterDate"),d=s({});Q(()=>o,()=>{d.value={...d.value,...V(o.value)},S()},{deep:!0});const c=s(""),i=s({}),v=s([]),q=[{title:"序号",dataIndex:"id",key:"id"},{title:"检查时间",dataIndex:"inspectTime",key:"id"},{title:"检查结果",dataIndex:"inspectResult",key:"id"},{title:"单位名称",dataIndex:"companyName",key:"id"}],B=O([{label:"全部",value:""},{label:"合格",value:"A"},{label:"不合格",value:"B"},{label:"已整改",value:"C"}]),w=s(),j=s(),p=s(),h=s([]),C=s(0),I=O([{label:"当前记录所选时间",value:"今日"},{label:"所选街道",value:"全部"},{label:"记录总数",value:h.value.length}]);X(()=>{S(),R(),k()});const S=async()=>{const t=await b.getInspectOverviews(d.value);console.log(t),i.value=t,P(w.value.chart,Object.keys(t.areaInfo).map(a=>{var l;return{name:(l=v.value.find(f=>f.id==a))==null?void 0:l.name,value:t.areaInfo[a]}})),C.value=Object.values(t.licenceStatus).reduceRight((a,l)=>a+=l,0),p.value.chart.setOption({...p.value.chart.getOption(),xAxis:[{type:"category",boundaryGap:!1,data:t.everyMonthTrend[0].map(a=>a+"月")}],series:[{name:"合格数",type:"line",areaStyle:{},data:t.everyMonthTrend[1]},{name:"隐患数",type:"line",areaStyle:{},data:t.everyMonthTrend[2]},{name:"已整改",type:"line",areaStyle:{},data:t.everyMonthTrend[3]}]})},R=async()=>{const t=await b.getAreas();v.value=t},k=async()=>{const t=await b.getInspectLog({inspectResult:c.value});h.value=t,I[2].value=t.length},F=y({convertData:()=>[{value:90,name:"一号楼"},{value:50,name:"二号楼"},{value:20,name:"车库"},{value:20,name:"健身房"},{value:100,name:"电房"},{value:50,name:"公寓楼"}],convertlegend:()=>({right:0,left:null,top:"center"}),convertSeries:()=>({width:180,height:200,left:10})}),G=y({convertData:()=>[{value:100,name:"正常"},{value:10,name:"过期"},{value:20,name:"故障"}],convertlegend:()=>({right:90,left:null,top:55,itemGap:27}),convertSeries:()=>({radius:["50%","60%"],width:280,height:280,top:0})}),$=y({multiple:!0,convertlegend:()=>({bottom:null,top:0,left:"center",orient:"horizontal"}),convertYxis:()=>[{type:"value"}],convertXAxis:()=>[{type:"category",boundaryGap:!1,data:["1月","3月","6月","9月","12月"]}],convertSeries:()=>[{name:"汽耗",type:"line",areaStyle:{},data:[120,132,101,134,90,230,210]},{name:"水耗",type:"line",areaStyle:{},data:[220,182,191,234,290,330,310]},{name:"电耗",type:"line",areaStyle:{},data:[150,232,201,154,190,330,410]}]}),z=t=>{c.value=t.value,k()};return(t,a)=>(_(),m("div",ne,[e("div",se,[n(D,{title:"总体概况"}),e("div",le,[n(T,{icon:r(W),unit:"机构",label:"检查次数",num:i.value.inspecNum},null,8,["icon","num"]),n(T,{icon:r(Z),unit:"%",label:"能耗率",num:.7*100},null,8,["icon"])]),e("div",oe,[e("div",ie,[e("div",null,[e("div",ce,[a[0]||(a[0]=e("div",{class:"num-label"},"高能耗",-1)),e("div",re,u(i.value.qialifiedNum),1)]),n(x,{width:"90%",color:"#ba1717"})]),e("div",null,[e("div",ue,[a[1]||(a[1]=e("div",{class:"num-label"},"正常能耗",-1)),e("div",de,u(i.value.unqialifiedNum),1)]),n(x,{width:"50%",color:"#D6AB0D"})]),e("div",null,[e("div",ve,[a[2]||(a[2]=e("div",{class:"num-label"},"低能耗",-1)),e("div",me,u(i.value.rectificationNum),1)]),n(x,{width:"20%",color:"#3CF313"})])]),e("div",_e,[n(g,{options:r(F),ref_key:"chart1",ref:w},null,8,["options"]),a[3]||(a[3]=e("div",{class:"chart-msg-1"},"能耗分布",-1))])]),e("div",pe,[n(N,{title:"设备状态"}),e("div",he,[n(g,{options:r(G),ref_key:"chart2",ref:j},null,8,["options"]),e("div",fe,[e("div",be,u(C.value),1),a[4]||(a[4]=e("div",null,"总数量",-1))])])]),e("div",null,[n(N,{title:"每月趋势"}),e("div",ye,[n(g,{options:r($),ref_key:"chart3",ref:p},null,8,["options"])])])]),e("div",ge,[n(D,{title:"检查记录"}),e("div",xe,[(_(!0),m(Y,null,H(B,(l,f)=>(_(),m("div",{class:U({active:c.value===l.value}),onClick:Se=>z(l),key:f},u(l.label),11,we))),128))]),e("div",Ce,[n(E,{contents:I},null,8,["contents"])]),n(ae,{color:"blue",data:h.value,columns:q},null,8,["data"])])]))}});const Oe=L(Ie,[["__scopeId","data-v-084027ac"]]);export{Oe as default};
